networks:
  gitea:
    external: true

volumes:
  data:
    driver: local
  cache:
    driver: local

services:
  runner:
    image: docker.io/gitea/act_runner:nightly
    restart: always
    environment:
      CONFIG_FILE: /config.yaml
      GITEA_INSTANCE_URL: "${INSTANCE_URL}"
      GITEA_RUNNER_REGISTRATION_TOKEN: "${REGISTRATION_TOKEN}"
    volumes:
      - data:/data
      - cache:/root/.cache
      # Generated by `docker run --entrypoint="" --rm -it docker.io/gitea/act_runner:nightly act_runner generate-config > config.yaml`
      # `docker.io/gitea/act_runner:nightly` could be replaced with your actual image name
      # And you can change the config content as you need
      - ./config.yaml:/config.yaml
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - gitea
